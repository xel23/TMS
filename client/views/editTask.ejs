<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" type="text/plain" href="/stylesheets/style.css">

    <title><%= title %></title>
</head>
<body>
<%- include('navbar') %>
<div class="container">
    <h2 class="mb-3" style="padding: 15px 15px 0 0">Edit Task</h2>
    <div style="margin-bottom: 10px">
        <form method="post" action="/editTask/<%= task[0].id %>">
            <% if (errors) { %>
                <% for (var n = 0; n < errors.length; n++) {%>
                    <div class="alert alert-danger">
                        <%= errors[n].msg %>
                    </div>
                <% } %>
            <% } %>
            <div class="form-group w-100">
                <label>Summary</label>
                <input name="summary" type="text" class="form-control w-100" placeholder="Enter summary" value="<%= task[0].summary %>">
            </div>
            <div class="form-group">
                <label>Description</label>
                <textarea name="description" class="form-control" placeholder="Enter description"><%= task[0].description %></textarea>
            </div>
            <div class="form-group">
                <label>Assignee</label>
                <input name="username" type="text" class="form-control" placeholder="Enter username" value="<%= task[0].assignee %>">
            </div>
            <div class="form-group">
                <label>Status</label>
                <select name="status" class="custom-select">
                    <% for (let j in status) {%>
                        <% if (status[j] === status[task[0].status]) {%>
                            <option value="<%= j; %>" selected><%= status[j]; %></option>
                        <%} else {%>
                            <option value="<%= j; %>"><%= status[j]; %></option>
                        <% } %>
                    <% } %>
                </select>
            </div>
            <div class="form-group">
                <label>Type</label>
                <select name="type" class="custom-select">
                    <% for (let type in types) {%>
                        <% if (types[type] == types[task[0].type]) {%>
                            <option value="<%= type; %>" selected><%= types[type]; %></option>
                        <%} else {%>
                            <option value="<%= type; %>"><%= types[type]; %></option>
                        <% } %>
                    <% } %>
                </select>
            </div>
            <div class="form-group">
                <label>Priority</label>
                <select name="priority" class="custom-select">
                    <% for (let priority in priorities) {%>
                        <% if (priorities[priority] == priorities[task[0].priority]) {%>
                            <option value="<%= priority; %>" selected><%= priorities[priority]; %></option>
                        <%} else {%>
                            <option value="<%= priority; %>"><%= priorities[priority]; %></option>
                        <% } %>
                    <% } %>
                </select>
            </div>
            <button name="submit" value="Register" type="submit" class="btn btn-primary">Update</button>
        </form>
    </div>
</div>
</body>
</html>
